Backport of #12037 to master

Error on cherry-picking: bbcde7d7f97a0aba7705513f00e8f676586458ce

To continue do:
```bash
git fetch && \
  git checkout ghci/backport/12037-to-master && \
  git reset --hard HEAD^ && \
  git cherry-pick bbcde7d7f97a0aba7705513f00e8f676586458ce
git push origin ghci/backport/12037-to-master --force
```