---
checks:
  black: False
  isort: False
  codespell: False
  required_workflows:
    main.yaml: False
    clean.yaml: False
    audit.yaml: False
    dependabot-auto-merge.yaml: False
  dependabot_config: False

audit:
  npm:
    cwe_ignore:
      - CWE-20 # Improper Input Validation
      - CWE-22 # Improper Limitation of a Pathname to a Restricted Directory ('Path Traversal')
      - CWE-59 # Improper Link Resolution Before File Access ('Link Following')
      - CWE-61 # UNIX Symbolic Link (Symlink) Following
      - CWE-77 # Improper Neutralization of Special Elements used in a Command ('Command Injection')
      - CWE-125 # Out-of-bounds Read
      - CWE-295 # Improper Certificate Validation
      - CWE-331 # Insufficient Entropy
      - CWE-346 # Origin Validation Error
      - CWE-400 # Uncontrolled Resource Consumption
      - CWE-502 # Deserialization of Untrusted Data
      - CWE-532 # Insertion of Sensitive Information into Log File
      - CWE-915 # Improperly Controlled Modification of Dynamically-Determined Object Attributes
      - CWE-918 # Server-Side Request Forgery (SSRF)
    package_ignore:
      - angular-gettext-tools

  pipfile:
    sections:
      - default

  snyk:
    test_arguments:
      - --all-projects
      - --fail-on=upgradable
      - --severity-threshold=medium

publish:
  docker:
    images:
      - name: camptocamp/geomapfish
      - name: camptocamp/geomapfish-tools
        group: full
      - name: camptocamp/geomapfish-config
        group: full
      - name: camptocamp/geomapfish-geoportal
      # 2.4
      - name: camptocamp/geomapfish-qgisserver
        group: qgis-3.10
        tags:
          - gmf{version}-qgis3.10
      - name: camptocamp/geomapfish-qgisserver
        group: qgis-3.16
        tags:
          - gmf{version}-qgis3.16
      - name: camptocamp/geomapfish-qgisserver
        group: qgis-master
        tags:
          - gmf{version}-qgismaster
      # The group qgis-old is required for the clean workflow
      # 2.4, 2.5
      - name: camptocamp/geomapfish-qgisserver
        group: qgis-3.4
        tags:
          - gmf{version}-qgis3.4
      # 2.5
      - name: camptocamp/geomapfish-qgisserver
        group: qgis-3.12
        tags:
          - gmf{version}-qgis3.12
      # 2.5
      - name: camptocamp/geomapfish-qgisserver
        group: qgis-3.14
        tags:
          - gmf{version}-qgis3.14
  pypi:
    packages: []
#      - path: commons
#      - path: geoportal
#      - path: admin
