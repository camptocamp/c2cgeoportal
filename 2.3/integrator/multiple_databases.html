
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Using multiple databases &#8212; c2cgeoportal  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring Windows tools required to connect to our servers" href="windows_tools.html" />
    <link rel="prev" title="Adding a new user interface" href="ngeo_new_interface.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-multiple-databases">
<span id="integrator-multiple-databases"></span><h1>Using multiple databases<a class="headerlink" href="#using-multiple-databases" title="Permalink to this headline">¶</a></h1>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>In your <code class="docutils literal notranslate"><span class="pre">vars</span></code> file, configure any database sessions
that you want to access in your GMF instance in addition to
the default database session. For example, to add sessions
from a database <code class="docutils literal notranslate"><span class="pre">otherdb</span></code> and from a database <code class="docutils literal notranslate"><span class="pre">moredb</span></code>:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dbsessions</span><span class="p">:</span>
   <span class="n">otherdb_session</span><span class="p">:</span>
      <span class="n">url</span><span class="p">:</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">dbuser</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dbpassword</span><span class="o">&gt;@&lt;</span><span class="n">dbhost</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dbport</span><span class="o">&gt;/</span><span class="n">otherdb</span>
   <span class="n">moredb_session</span><span class="p">:</span>
      <span class="n">url</span><span class="p">:</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">dbuser</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dbpassword</span><span class="o">&gt;@&lt;</span><span class="n">dbhost</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dbport</span><span class="o">&gt;/</span><span class="n">moredb</span>
</pre></div>
</div>
<p>These additional DB sessions will be automatically initialized by GMF.</p>
</div>
<div class="section" id="using-the-additional-sessions">
<h2>Using the additional sessions<a class="headerlink" href="#using-the-additional-sessions" title="Permalink to this headline">¶</a></h2>
<p>In the layers enumeration of your <code class="docutils literal notranslate"><span class="pre">vars</span></code> file, you can now
reference the sessions defined above. For example:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layers</span><span class="p">:</span>
    <span class="n">enum</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">somelayer</span><span class="o">&gt;</span><span class="p">:</span>
            <span class="n">dbsession</span><span class="p">:</span> <span class="n">otherdb_session</span>
</pre></div>
</div>
<p>In Python code, additional sessions as configured above can be accessed
via <code class="docutils literal notranslate"><span class="pre">DBSessions</span></code>. For example:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">c2cgeoportal_commons.models</span> <span class="k">import</span> <span class="n">DBSessions</span>
<span class="o">...</span>
<span class="n">other_session</span> <span class="o">=</span> <span class="n">DBSessions</span><span class="p">[</span><span class="s1">&#39;otherdb_session&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This will provide you with a
<a class="reference external" href="http://docs.sqlalchemy.org/en/rel_1_0/orm/session_basics.html#getting-a-session">DB session object</a>.
The session name for the default database is <code class="docutils literal notranslate"><span class="pre">dbsession</span></code>.</p>
<p>To access attributes of your settings, proceed as follows
(example for the <code class="docutils literal notranslate"><span class="pre">otherdb_session</span></code> described above):</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;dbsessions&#39;</span><span class="p">][</span><span class="s1">&#39;otherdb_session&#39;</span><span class="p">][</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="restrictions-in-multiple-database-usage">
<h2>Restrictions in multiple database usage<a class="headerlink" href="#restrictions-in-multiple-database-usage" title="Permalink to this headline">¶</a></h2>
<p>In a GMF instance, an editable layer can only be included when that layer’s data
resides in the default database of the GMF instance.
Regarding editable layers, see <a class="reference internal" href="../administrator/editing.html#administrator-editing-editable"><span class="std std-ref">here</span></a>.
The reason for this restriction is that the administrator settings currently
do not allow to specify a database session in the layer settings. Because for editable
layers, GMF always uses the configuration provided in the administration settings,
only the default database session can be used for such layers.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using multiple databases</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#using-the-additional-sessions">Using the additional sessions</a></li>
<li><a class="reference internal" href="#restrictions-in-multiple-database-usage">Restrictions in multiple database usage</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Integrator Guide</a><ul>
  <li><a href="configuration.html">Configuration Guide for advanced settings</a><ul>
      <li>Previous: <a href="ngeo_new_interface.html" title="previous chapter">Adding a new user interface</a></li>
      <li>Next: <a href="windows_tools.html" title="next chapter">Configuring Windows tools required to connect to our servers</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/integrator/multiple_databases.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2019, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/integrator/multiple_databases.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>