<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Upgrading a GeoMapFish application &mdash; c2cgeoportal  documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="c2cgeoportal  documentation" href="../index.html" />
    <link rel="up" title="Integrator Guide" href="index.html" />
    <link rel="next" title="Configuring Windows tools required to connect to our servers" href="windows_tools.html" />
    <link rel="prev" title="Install an existing application" href="install_application.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="upgrading-a-geomapfish-application">
<span id="integrator-upgrade-application"></span><h1>Upgrading a GeoMapFish application<a class="headerlink" href="#upgrading-a-geomapfish-application" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">From version 1.6 we use Alembic instead of sqlachemy-migrate for database migration.
Than to upgrade to GeoMapFish 1.6, integrators must start from the very last release
of 1.5 since the upgrades to 1.5 are no longer available with the new tool.</p>
</div>
<div class="section" id="using-the-c2ctool-command">
<h2>Using the c2ctool command<a class="headerlink" href="#using-the-c2ctool-command" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">c2ctool</span></code> is a tool to facilitate the common operations around GeoMapFish.</p>
</div>
<div class="section" id="easy-updating-an-application-code">
<h2>Easy updating an application code<a class="headerlink" href="#easy-updating-an-application-code" title="Permalink to this headline">¶</a></h2>
<pre class="highlight"><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">make -f &lt;makefile&gt; update</span>
<span class="prompt1">make -f &lt;makefile&gt; build</span>
</pre><p>Where <code class="docutils literal"><span class="pre">&lt;makefile&gt;</span></code> is your user make file (<code class="docutils literal"><span class="pre">&lt;user&gt;.mk</span></code>).</p>
</div>
<div class="section" id="easy-upgrading-an-application">
<h2>Easy upgrading an application<a class="headerlink" href="#easy-upgrading-an-application" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To upgrade from version 1.6 to version 2.0 you should update the
<code class="docutils literal"><span class="pre">CONST_requirements.txt</span></code> file:</p>
<div class="code diff highlight-python"><div class="highlight"><pre>\- --find-links http://pypi.camptocamp.net/internal-pypi/index/c2cgeoportal
+ --find-links https://camptocamp.github.io/c2cgeoportal/index/c2cgeoportal
</pre></div>
</div>
<p>And run:</p>
<pre class="highlight"><span class="prompt1"><span class="nb">export </span><span class="nv">UPGRADE_ARGS</span><span class="o">=</span><span class="s1">&#39;--index-url https://camptocamp.github.io/c2cgeoportal/index/c2cgeoportal --c2cgeoportal-url https://github.com/camptocamp/c2cgeoportal/releases/download/%\(version\)/%\(package\)-%\(version\)-py2.py3-none-any.whl&#39;</span></span>
</pre></div>
<p>In the <code class="docutils literal"><span class="pre">setup.py</span></code> be sure not to specify a <code class="docutils literal"><span class="pre">c2cgeoportal</span></code> version,
because it will prevent the installation of the new <code class="docutils literal"><span class="pre">c2cgeoportal</span></code> egg.</p>
<p>We considers that your makefile is named <code class="docutils literal"><span class="pre">&lt;instanceid&gt;.mk</span></code>, if it&#8217;s not the case
add in your Makefile <code class="docutils literal"><span class="pre">UPGRADE_MAKE_FILE</span> <span class="pre">=</span> <span class="pre">&lt;user.mk&gt;</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For Windows:</p>
<p class="last">You should add <code class="docutils literal"><span class="pre">UPGRADE_ARGS</span> <span class="pre">+=</span> <span class="pre">--windows</span></code> in your <code class="docutils literal"><span class="pre">&lt;package&gt;.mk</span></code> file.</p>
</div>
<p>Than just run:</p>
<pre class="highlight"><span class="prompt1"><span class="nb">export </span><span class="nv">VERSION</span><span class="o">=</span>&lt;target_version&gt;</span>
<span class="prompt1">make -f &lt;makefile&gt; upgrade</span>
</pre><p>Where <code class="docutils literal"><span class="pre">&lt;makefile&gt;</span></code> is your user Makefile (<code class="docutils literal"><span class="pre">&lt;user&gt;.mk</span></code>),
<code class="docutils literal"><span class="pre">&lt;target_version&gt;</span></code> is the version that you wish to upgrade to
(for the development version it should be &#8216;master&#8217;).</p>
<p>And follow the instructions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For Windows:</p>
<p>If you are using Windows, you will have to execute some steps prior
to the instructions hereunder:</p>
<ul class="last">
<li><p class="first">Uninstall manually the old c2cgeoportal egg:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">.build/venv/Scripts/pip</span> <span class="pre">uninstall</span> <span class="pre">c2cgeoportal</span></code></p>
</div></blockquote>
</li>
<li><p class="first">Clean / remove the generated files:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">make</span> <span class="pre">-f</span> <span class="pre">&lt;makefile&gt;</span> <span class="pre">clean</span></code></p>
</div></blockquote>
</li>
<li><p class="first">Change the version in <code class="docutils literal"><span class="pre">setup.py</span></code> and <code class="docutils literal"><span class="pre">CONST_requirements.txt</span></code>
to the version you wish to install.</p>
</li>
<li><p class="first">Build your application:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">make</span> <span class="pre">-f</span> <span class="pre">&lt;makefile&gt;</span> <span class="pre">build</span></code></p>
</div></blockquote>
</li>
<li><p class="first">Put your modifications under git revision:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">setup.py</span></code></p>
<p><code class="docutils literal"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">CONST_requirements.txt</span></code></p>
<p><code class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">&quot;Upgrade</span> <span class="pre">c2cgeoportal</span> <span class="pre">version&quot;</span></code></p>
<p><code class="docutils literal"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">&lt;remote&gt;</span> <span class="pre">&lt;branch&gt;</span></code></p>
</div></blockquote>
</li>
<li><p class="first">Follow the Windows instructions hereunder, note that you will have to use
<code class="docutils literal"><span class="pre">.build\venv\Scripts\...</span></code> instead of <code class="docutils literal"><span class="pre">.build\venv\bin\...</span></code> in all given
commands</p>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Upgrading a GeoMapFish application</a><ul>
<li><a class="reference internal" href="#using-the-c2ctool-command">Using the c2ctool command</a></li>
<li><a class="reference internal" href="#easy-updating-an-application-code">Easy updating an application code</a></li>
<li><a class="reference internal" href="#easy-upgrading-an-application">Easy upgrading an application</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Integrator Guide</a><ul>
      <li>Previous: <a href="install_application.html" title="previous chapter">Install an existing application</a></li>
      <li>Next: <a href="windows_tools.html" title="next chapter">Configuring Windows tools required to connect to our servers</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/integrator/upgrade_application.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2014, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/integrator/upgrade_application.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>