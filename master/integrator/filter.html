
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Filter (Querier) &#8212; c2cgeoportal  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/c2c.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Full-text search" href="fulltext_search.html" />
    <link rel="prev" title="Create a cluster" href="cluster.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="filter-querier">
<span id="integrator-querier"></span><h1>Filter (Querier)<a class="headerlink" href="#filter-querier" title="Permalink to this headline">¶</a></h1>
<section id="filterable-layers">
<h2>Filterable layers<a class="headerlink" href="#filterable-layers" title="Permalink to this headline">¶</a></h2>
<p>Per default, layers are not filterable.
If you wish to provide filter functionality for some layers, proceed as follows:</p>
<ul class="simple">
<li><p>For each layer you want to be filtrable create a functionality record with <code class="docutils literal notranslate"><span class="pre">filterable_layers</span></code> as name
and the layer name as value.</p></li>
<li><p>In any role (anonymous, registered, intranet or any other role) check the corresponding functionality records.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ngeo offers the filter functionality only for single layers, not for grouped layers.</p>
</div>
</section>
<section id="available-attributes-and-operators-in-filters">
<h2>Available attributes and operators in filters<a class="headerlink" href="#available-attributes-and-operators-in-filters" title="Permalink to this headline">¶</a></h2>
<p>All attributes defined as “exported” in the layer of your map server will be automatically available as
filterable attribute. If the type, and so the operator on the attribute, is not adequate for
filtering, you should adapt the type in your layer definition.
See <a class="reference internal" href="../administrator/mapfile.html#administrator-mapfile-wfs-getfeature"><span class="std std-ref">WFS GetFeature</span></a> for more information (MapServer only).</p>
</section>
<section id="enumerate-available-attributes-for-a-layer">
<h2>Enumerate available attributes for a layer<a class="headerlink" href="#enumerate-available-attributes-for-a-layer" title="Permalink to this headline">¶</a></h2>
<section id="project-configuration-file">
<h3>Project Configuration file<a class="headerlink" href="#project-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>In the filter panel, instead of the standard text field, it is possible to display combos providing the
available values of the attributes. The values are automatically retrieved using a web service that does a
<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">distinct(&lt;column&gt;)</span> <span class="pre">FROM</span> <span class="pre">&lt;table&gt;</span></code>.</p>
<p>The web service configuration is done in the <code class="docutils literal notranslate"><span class="pre">vars.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">layers</span><span class="p">:</span>
    <span class="nt">enum</span><span class="p">:</span>
        <span class="nt">&lt;layer_name&gt;</span><span class="p">:</span>
            <span class="nt">dbsession</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;session name&gt;</span>
            <span class="nt">attributes</span><span class="p">:</span>
                <span class="nt">&lt;attribute name&gt;</span><span class="p">:</span>
                    <span class="nt">table</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;[schema.]table name&gt;</span>
                    <span class="nt">column_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;column name&gt;</span>
                    <span class="nt">separator</span><span class="p">:</span> <span class="s">&quot;,&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dbsession:</span> <span class="pre">&quot;&lt;session</span> <span class="pre">name&gt;&quot;</span></code> at the <code class="docutils literal notranslate"><span class="pre">enum.defaults</span></code> level can be used
to specify another DB session than the main DB session.
See <a class="reference internal" href="multiple_databases.html#integrator-multiple-databases"><span class="std std-ref">Using multiple databases</span></a> regarding the setup of multiple databases.
If omitted, the main DB session is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">table:</span> <span class="pre">&quot;&lt;[schema.]table</span> <span class="pre">name&gt;&quot;</span></code> may be used at the layer <code class="docutils literal notranslate"><span class="pre">defaults</span></code> level as a the default
table where following attributes may be found. It can be overridden at the
attribute level. <code class="docutils literal notranslate"><span class="pre">table</span></code> is a mandatory parameter.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">column_name</span></code> is not defined, the attribute name is used.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">separator</span></code> is defined, the column is treated as a list of values.</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">layers</span>
    <span class="l l-Scalar l-Scalar-Plain">enum</span><span class="p p-Indicator">:</span>
        <span class="nt">mapserver_layer</span><span class="p">:</span>
            <span class="nt">attributes</span><span class="p">:</span>
                <span class="nt">type</span><span class="p">:</span> <span class="nl">&amp;layers-enum-mapserver-layer-defaults</span>
                    <span class="nt">table</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">geodata.table</span>
                <span class="nt">country</span><span class="p">:</span> <span class="nv">*layers-enum-mapserver-layer-defaults</span>
</pre></div>
</div>
</section>
<section id="administration-interface">
<h3>Administration interface<a class="headerlink" href="#administration-interface" title="Permalink to this headline">¶</a></h3>
<p>You can add some additional configuration in the administration interface as follows.</p>
<p>It is possible to define enumerated or directed attributes, to WMS layers only, via metadata.
The metadata to define is <code class="docutils literal notranslate"><span class="pre">enumeratedAttributes</span></code> or <code class="docutils literal notranslate"><span class="pre">directedFilterAttributes</span></code>.</p>
<p>For enumerated attributes, the value is a single string or a list of attributes (that we defined earlier
in the <code class="docutils literal notranslate"><span class="pre">vars.yaml</span></code> file) separated with a comma.</p>
<p>For directed attributes, it is a single string or a list of attributes defined in the mapfile
(columns and aliases from the selected table).</p>
<p>The difference is that enumerated attributes are configurable (like pointing to a specific database table),
while directed attributes are ready-to-use values that come directly from the mapfile configuration.</p>
<p>Client-side documentation related to the <code class="docutils literal notranslate"><span class="pre">enumeratedAttributes</span></code> and <code class="docutils literal notranslate"><span class="pre">directedFilterAttributes</span></code> metadata
is available here:
<a class="reference external" href="https://camptocamp.github.io/ngeo/master/apidoc/gmfThemes.GmfMetaData.html">gmfThemes.GmfMetaData</a>.</p>
</section>
<section id="using-db-sessions">
<h3>Using DB sessions<a class="headerlink" href="#using-db-sessions" title="Permalink to this headline">¶</a></h3>
<p>It is possible to get attribute lists also
for a layer whose data is hosted in an external database, using the
<code class="docutils literal notranslate"><span class="pre">dbsession:</span> <span class="pre">&quot;&lt;session</span> <span class="pre">name&gt;&quot;</span></code> parameter.</p>
<p>See <a class="reference internal" href="multiple_databases.html#integrator-multiple-databases"><span class="std std-ref">Using multiple databases</span></a> for more information.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">c2cgeoportal</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=camptocamp&repo=c2cgeoportal&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../administrator/index.html">Administrator Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Integrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Integrator Guide</a><ul>
  <li><a href="configuration.html">Configuration Guide for advanced settings</a><ul>
      <li>Previous: <a href="cluster.html" title="previous chapter">Create a cluster</a></li>
      <li>Next: <a href="fulltext_search.html" title="next chapter">Full-text search</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2021, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/integrator/filter.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>