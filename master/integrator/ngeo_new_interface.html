
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Adding a new user interface &#8212; c2cgeoportal  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/c2c.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using multiple databases" href="multiple_databases.html" />
    <link rel="prev" title="TileGeneration" href="tilegeneration.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="adding-a-new-user-interface">
<span id="integrator-ngeo-new-interface"></span><h1>Adding a new user interface<a class="headerlink" href="#adding-a-new-user-interface" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not possible in the simple application mode</p>
</div>
<p>This section describes how to add a new user interface to be named &lt;interface&gt;
(for example, “new”) in a package named <code class="docutils literal notranslate"><span class="pre">&lt;package&gt;</span></code>.</p>
<section id="makefile">
<h2>Makefile<a class="headerlink" href="#makefile" title="Permalink to this headline">¶</a></h2>
<p>In your project’s makefile, add the new interface to <code class="docutils literal notranslate"><span class="pre">NGEO_INTERFACES</span></code>.
For example, to have two NGEO interfaces called “mobile” and “new”, set:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">NGEO_INTERFACES</span> <span class="o">=</span> mobile new
</pre></div>
</div>
</section>
<section id="copy-files-from-template">
<h2>Copy files from template<a class="headerlink" href="#copy-files-from-template" title="Permalink to this headline">¶</a></h2>
<p>If you want a new mobile interface, get the default files as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">cp CONST_create_template/geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/mobile.html.ejs <span class="se">\</span>
  geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/&lt;interface&gt;.html.ejs</span>
<span class="prompt1">cp CONST_create_template/geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/Controllermobile.js <span class="se">\</span>
  geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/Controller&lt;interface&gt;.js</span>
</pre></div></div><p>If you want a new desktop interface, get the default files as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">cp CONST_create_template/geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/desktop.html.ejs <span class="se">\</span>
  geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/&lt;interface&gt;.html.ejs</span>
<span class="prompt1">cp CONST_create_template/geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/Controllerdesktop.js <span class="se">\</span>
  geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/Controller&lt;interface&gt;.js</span>
</pre></div></div></section>
<section id="edit-interface-files">
<h2>Edit interface files<a class="headerlink" href="#edit-interface-files" title="Permalink to this headline">¶</a></h2>
<p>In the file <code class="docutils literal notranslate"><span class="pre">geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/Controller&lt;interface&gt;.js</span></code>,
adapt the following lines:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;App&lt;interface&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;&lt;Interface&gt;Controller&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">exports</span><span class="p">);</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
<p>where  <code class="docutils literal notranslate"><span class="pre">&lt;interface&gt;</span></code> (desktop in the original file) is the name of your new interface.</p>
<p>In the file <code class="docutils literal notranslate"><span class="pre">geoportal/&lt;package&gt;_geoportal/static-ngeo/static-ngeo/js/apps/&lt;interface&gt;.html.ejs</span></code>,
adapt the name of the controller and the referenced css and js files to the new interface name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;{{mainCtrl.lang}}&quot;</span> <span class="n">ng</span><span class="o">-</span><span class="n">controller</span><span class="o">=</span><span class="s2">&quot;&lt;Interface&gt;Controller as mainCtrl&quot;</span><span class="o">&gt;</span>
<span class="o">...</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;interface&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s2">&quot;&lt;interface&gt;&quot;</span><span class="o">&gt;</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Add the new interface files to Git:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git add geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/&lt;interface&gt;.html.ejs</span>
<span class="prompt1">git add geoportal/&lt;package&gt;_geoportal/static-ngeo/js/apps/Controller&lt;interface&gt;.js</span>
</pre></div></div></section>
<section id="package-file">
<h2>Package file<a class="headerlink" href="#package-file" title="Permalink to this headline">¶</a></h2>
<p>Update the interface in your <code class="docutils literal notranslate"><span class="pre">geoportal/&lt;package&gt;_geoportal/__init__.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_interface</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s2">&quot;&lt;interface&gt;&quot;</span><span class="p">,</span> <span class="n">INTERFACE_TYPE_NGEO</span><span class="p">)</span>
</pre></div>
</div>
<p>The used method has the following API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_interface</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">interface_name</span><span class="o">=</span><span class="s2">&quot;&lt;interface&gt;&quot;</span><span class="p">,</span> <span class="n">interface_type</span><span class="o">=</span><span class="n">INTERFACE_TYPE_NGEO</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code> is the application configuration object,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interface_name</span></code> is the name specified in the <code class="docutils literal notranslate"><span class="pre">interface</span></code> table,
also used to create the route path,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interface_type</span></code> may be either <code class="docutils literal notranslate"><span class="pre">INTERFACE_TYPE_NGEO</span></code> or
<code class="docutils literal notranslate"><span class="pre">INTERFACE_TYPE_NGEO_CATALOGUE</span></code>.</p></li>
</ul>
</section>
<section id="site-specific-configuration">
<h2>Site-specific configuration<a class="headerlink" href="#site-specific-configuration" title="Permalink to this headline">¶</a></h2>
<p>After rebuilding your project and verifying that the new interface has no technical errors,
some site-specific configuration issues must be considered:</p>
<blockquote>
<div><ul class="simple">
<li><p>set the default theme of the new interface as desired (set <code class="docutils literal notranslate"><span class="pre">defaultTheme</span></code>
in <code class="docutils literal notranslate"><span class="pre">&lt;interface&gt;.html</span></code>)</p></li>
<li><p>set a meaningful starting zoom level and center coordinates of the new interface,
in <code class="docutils literal notranslate"><span class="pre">&lt;interface&gt;.js</span></code></p></li>
<li><p>after rebuilding, to see the changes in the browser, you probably need to clear
the browser cache and your URL parameters, and maybe in addition wait some minutes
in order for the server-side to also be completely up-to-date.</p></li>
</ul>
</div></blockquote>
</section>
<section id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>The administration interface gives access to an <code class="docutils literal notranslate"><span class="pre">interface</span></code> table that lists the
available interfaces (or pages) of the application.
The default interfaces are <code class="docutils literal notranslate"><span class="pre">desktop</span></code> and <code class="docutils literal notranslate"><span class="pre">mobile</span></code>.
Add the name of your interface to the table. This can be done using the admin interface.</p>
</section>
<section id="checker">
<h2>Checker<a class="headerlink" href="#checker" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to enable the checker for the new interface.</p>
<p>We suggest to add only the main checker in the <code class="docutils literal notranslate"><span class="pre">defaults</span></code>. It is what is done by default.
In the <code class="docutils literal notranslate"><span class="pre">all</span></code> (<code class="docutils literal notranslate"><span class="pre">vars.checker.all</span></code>) section, check all the ngeo interfaces in standard
and debug mode:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">phantomjs_routes</span><span class="p">:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;interface&gt;</span><span class="w"></span>
<span class="w">  </span><span class="nt">params</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">no_redirect</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;interface&gt;</span><span class="w"></span>
<span class="w">  </span><span class="nt">param</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">no_redirect</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>By default, the checker is enabled for the desktop and mobile interfaces.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">c2cgeoportal</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=camptocamp&repo=c2cgeoportal&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../administrator/index.html">Administrator Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Integrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Integrator Guide</a><ul>
  <li><a href="configuration.html">Configuration Guide for advanced settings</a><ul>
      <li>Previous: <a href="tilegeneration.html" title="previous chapter">TileGeneration</a></li>
      <li>Next: <a href="multiple_databases.html" title="next chapter">Using multiple databases</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2021, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/integrator/ngeo_new_interface.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>