
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Runtime configuration &#8212; c2cgeoportal  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/c2c.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ngeo" href="ngeo.html" />
    <link rel="prev" title="Build configuration" href="build.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="runtime-configuration">
<h1>Runtime configuration<a class="headerlink" href="#runtime-configuration" title="Permalink to this heading">¶</a></h1>
<p>In some situations, you may wish to define settings of the <code class="docutils literal notranslate"><span class="pre">vars.yaml</span></code> not directly,
but via an environment variable instead, to be interpreted at runtime.</p>
<p>On this documentation page, we will use the following examples:</p>
<ul class="simple">
<li><p>the “Google API Key” shall be set via environment variable, because you do not want the
key value to appear in the <code class="docutils literal notranslate"><span class="pre">vars.yaml</span></code> file, as it is sensitive information.</p></li>
<li><p>the “Password reset” link shall appear or not depending on the value of an environment
variable. This can be helpful if you are running several instances of your project,
where the link shall appear in some instances, but not all.</p></li>
</ul>
<section id="env-files">
<h2>Env files<a class="headerlink" href="#env-files" title="Permalink to this heading">¶</a></h2>
<p>For <code class="docutils literal notranslate"><span class="pre">env</span></code> files in general, see <a class="reference internal" href="build.html#integrator-build"><span class="std std-ref">Build configuration</span></a>.</p>
<p>Add the environment variables to your <code class="docutils literal notranslate"><span class="pre">env</span></code> files, set the right values for that <code class="docutils literal notranslate"><span class="pre">env</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GOOGLE_API_KEY=&lt;your-key&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GMF_AUTH_PWD_CHANGE=false</span></code></p></li>
</ul>
</section>
<section id="usage-in-vars">
<h2>Usage in vars<a class="headerlink" href="#usage-in-vars" title="Permalink to this heading">¶</a></h2>
<p>In your <code class="docutils literal notranslate"><span class="pre">geoportal/vars.yaml</span></code> file, you can refer to these environment variables,
if you list them in the <code class="docutils literal notranslate"><span class="pre">runtime_environment</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">vars</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">google_api_key</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;{GOOGLE_API_KEY}&#39;</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">interfaces_config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span>
<span class="w">      </span><span class="nt">constants</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">gmfAuthenticationConfig</span><span class="p p-Indicator">:</span>
<span class="w">          </span><span class="nt">allowPasswordReset</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{GMF_AUTH_PWD_RESET}&#39;</span>
<span class="nn">...</span>
<span class="nt">runtime_environment</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GOOGLE_API_KEY</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;***REMOVED***&#39;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GMF_AUTH_PWD_RESET</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;false&#39;</span>
</pre></div>
</div>
<p>Note that, in this example, the setting <code class="docutils literal notranslate"><span class="pre">allowPasswordReset</span></code> was added to the default
constants, but you could add it only to specific interfaces if you prefer. However,
because the variable <code class="docutils literal notranslate"><span class="pre">allowPasswordReset</span></code> is a boolean, additional
processing is needed to interpret it correctly, and you must provide the
correct full path to this variable:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">runtime_environment</span><span class="p">:</span>
<span class="nn">...</span>
<span class="nt">runtime_postprocess</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expression</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str({}).lower() in (&quot;true&quot;, &quot;yes&quot;, &quot;1&quot;)</span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">interfaces_config.default.constants.gmfAuthenticationConfig.allowPasswordReset</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">c2cgeoportal</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=camptocamp&repo=c2cgeoportal&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../administrator/index.html">Administrator Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Integrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Integrator Guide</a><ul>
  <li><a href="configuration.html">Configuration Guide for advanced settings</a><ul>
      <li>Previous: <a href="build.html" title="previous chapter">Build configuration</a></li>
      <li>Next: <a href="ngeo.html" title="next chapter">ngeo</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2023, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/integrator/runtime.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>