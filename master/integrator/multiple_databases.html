
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Using multiple databases &#8212; c2cgeoportal  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/c2c.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuring Windows tools required to connect to servers" href="windows_tools.html" />
    <link rel="prev" title="Adding a new user interface" href="ngeo_new_interface.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="using-multiple-databases">
<span id="integrator-multiple-databases"></span><h1>Using multiple databases<a class="headerlink" href="#using-multiple-databases" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not possible in the simple application mode</p>
</div>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>In your <code class="docutils literal notranslate"><span class="pre">vars</span></code> file, configure any database sessions
that you want to access in your GMF instance in addition to
the default database session. For example, to add sessions
from a database <code class="docutils literal notranslate"><span class="pre">otherdb</span></code> and from a database <code class="docutils literal notranslate"><span class="pre">moredb</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">dbsessions</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">otherdb_session</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql://&lt;dbuser&gt;:&lt;dbpassword&gt;@&lt;dbhost&gt;:&lt;dbport&gt;/otherdb</span><span class="w"></span>
<span class="w">   </span><span class="nt">moredb_session</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql://&lt;dbuser&gt;:&lt;dbpassword&gt;@&lt;dbhost&gt;:&lt;dbport&gt;/moredb</span><span class="w"></span>
</pre></div>
</div>
<p>These additional DB sessions will be automatically initialized by GMF.</p>
</section>
<section id="using-the-additional-sessions">
<h2>Using the additional sessions<a class="headerlink" href="#using-the-additional-sessions" title="Permalink to this headline">¶</a></h2>
<p>In the layers enumeration of your <code class="docutils literal notranslate"><span class="pre">vars</span></code> file, you can now
reference the sessions defined above. For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">layers</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enum</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">&lt;somelayer&gt;</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">dbsession</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otherdb_session</span><span class="w"></span>
</pre></div>
</div>
<p>In Python code, additional sessions as configured above can be accessed
via <code class="docutils literal notranslate"><span class="pre">DBSessions</span></code>. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">c2cgeoportal_commons.models</span> <span class="kn">import</span> <span class="n">DBSessions</span>
<span class="o">...</span>
<span class="n">other_session</span> <span class="o">=</span> <span class="n">DBSessions</span><span class="p">[</span><span class="s1">&#39;otherdb_session&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This will provide you with a
<a class="reference external" href="https://docs.sqlalchemy.org/en/rel_1_0/orm/session_basics.html#getting-a-session">DB session object</a>.
The session name for the default database is <code class="docutils literal notranslate"><span class="pre">dbsession</span></code>.</p>
<p>To access attributes of your settings, proceed as follows
(example for the <code class="docutils literal notranslate"><span class="pre">otherdb_session</span></code> described above):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;dbsessions&#39;</span><span class="p">][</span><span class="s1">&#39;otherdb_session&#39;</span><span class="p">][</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="restrictions-in-multiple-database-usage">
<h2>Restrictions in multiple database usage<a class="headerlink" href="#restrictions-in-multiple-database-usage" title="Permalink to this headline">¶</a></h2>
<p>In a GMF instance, an editable layer can only be included when that layer’s data
resides in the default database of the GMF instance.
Regarding editable layers, see <a class="reference internal" href="../administrator/editing.html#administrator-editing-editable"><span class="std std-ref">here</span></a>.
The reason for this restriction is that the administrator settings currently
do not allow to specify a database session in the layer settings. Because for editable
layers, GMF always uses the configuration provided in the administration settings,
only the default database session can be used for such layers.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">c2cgeoportal</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=camptocamp&repo=c2cgeoportal&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../administrator/index.html">Administrator Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Integrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Integrator Guide</a><ul>
  <li><a href="configuration.html">Configuration Guide for advanced settings</a><ul>
      <li>Previous: <a href="ngeo_new_interface.html" title="previous chapter">Adding a new user interface</a></li>
      <li>Next: <a href="windows_tools.html" title="next chapter">Configuring Windows tools required to connect to servers</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2021, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/integrator/multiple_databases.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>