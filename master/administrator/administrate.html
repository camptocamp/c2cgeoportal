
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Administrate a c2cgeoportal application &#8212; c2cgeoportal  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/c2c.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Editing" href="editing.html" />
    <link rel="prev" title="Administrator Guide" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="administrate-a-c2cgeoportal-application">
<span id="administrator-administrate"></span><h1>Administrate a c2cgeoportal application<a class="headerlink" href="#administrate-a-c2cgeoportal-application" title="Permalink to this headline">¶</a></h1>
<p>The administration interface is located at <code class="docutils literal notranslate"><span class="pre">https://&lt;server&gt;/&lt;project&gt;/admin</span></code>.</p>
<p>Authentication for the administration interface is done through the main application interface. Role
<code class="docutils literal notranslate"><span class="pre">role_admin</span></code> is required.</p>
<div class="section" id="ogc-server">
<span id="administrator-administrate-ogc-server"></span><h2>OGC Server<a class="headerlink" href="#ogc-server" title="Permalink to this headline">¶</a></h2>
<p>This is the description of an OGC server (WMS/WFS).
For one server we try to create only one request when it is possible.</p>
<p>If you want to query the same server to get PNG and JPEG images,
you should define two <code class="docutils literal notranslate"><span class="pre">OGC</span> <span class="pre">servers</span></code>. Attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: the name of the OGC Server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Basis</span> <span class="pre">URL</span></code>: the server URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WFS</span> <span class="pre">URL</span></code>: the WFS server URL. If empty, the <code class="docutils literal notranslate"><span class="pre">Basis</span> <span class="pre">URL</span></code> is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Server</span> <span class="pre">type</span></code>: the server type which is used to know which custom attribute will be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Image</span> <span class="pre">type</span></code>: the MIME type of the images (e.g.: <code class="docutils literal notranslate"><span class="pre">image/png</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Authentication</span> <span class="pre">type</span></code>: the kind of authentication to use.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WFS</span> <span class="pre">support</span></code>: whether WFS is supported by the server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Single</span> <span class="pre">tile</span></code>: whether to use the single tile mode (For future use).</p></li>
</ul>
</div>
<div class="section" id="metadata">
<span id="administrator-administrate-metadata"></span><h2>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h2>
<p>You can associate metadata to all theme elements (tree items).
The purpose of this metadata is to trigger specific features, mainly UI features.
Each metadata entry has the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: the type of <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> we want to set (the available names are configured in the <code class="docutils literal notranslate"><span class="pre">vars</span></code>
files in <code class="docutils literal notranslate"><span class="pre">admin_interface/available_metadata</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Value</span></code>: the value of the metadata entry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
</ul>
<p>To set a metadata entry, create or edit an entry in the Metadata view of the administration UI.
Regarding effect on the referenced tree item on the client side, you will find a description for each sort
of metadata in the <code class="docutils literal notranslate"><span class="pre">GmfMetaData</span></code> definition in
<a class="reference external" href="https://github.com/camptocamp/ngeo/blob/master/contribs/gmf/src/themes.js">themes.js</a>.</p>
<p>Some metadata items are used by the <code class="docutils literal notranslate"><span class="pre">layers</span></code> views (for editing) on the server side:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">editingAttributesOrder</span></code>: Specify the order of the editable attributes in the edit interface.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">geometryValidation</span></code>: Force validation of the geometries according to the layer type (point, line,</dt><dd><p>polygon), for example, to prevent creation of a 2 points polygon.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lastUpdateDateColumn</span></code>: Define a column which will be automatically filled with the date of the last edit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lastUpdateUserColumn</span></code>: Define a column which will be automatically filled with the user of the last edit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">readonlyAttributes</span></code>: Set attributes as read only.</p></li>
</ul>
</div>
<div class="section" id="functionalities">
<h2>Functionalities<a class="headerlink" href="#functionalities" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Roles</span></code> and <code class="docutils literal notranslate"><span class="pre">Themes</span></code> can have some functionalities. Attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: the type of functionality we want to set (configured in the <code class="docutils literal notranslate"><span class="pre">vars</span></code>
files in <code class="docutils literal notranslate"><span class="pre">admin_interface/available_functionalities</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Value</span></code>: the value of the functionality.</p></li>
</ul>
</div>
<div class="section" id="layers">
<span id="administrator-administrate-layers"></span><h2>Layers<a class="headerlink" href="#layers" title="Permalink to this headline">¶</a></h2>
<p>Layer definitions are found in to two tables: <code class="docutils literal notranslate"><span class="pre">layer_wms</span></code> and <code class="docutils literal notranslate"><span class="pre">layer_wmts</span></code>.</p>
<div class="section" id="all-layer-type">
<h3>All layer type<a class="headerlink" href="#all-layer-type" title="Permalink to this headline">¶</a></h3>
<p>All the layers in the admin interface have the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: the name of the WMS layer/group, or the WMTS layer.
It is used through the i18n tools to display the name on the layers tree.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span> <span class="pre">URL</span></code>: (deprecated)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Public</span></code>: makes the layer public. also it is accessible through the <code class="docutils literal notranslate"><span class="pre">Restriction</span> <span class="pre">areas</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Geo</span> <span class="pre">table</span></code>: the related database table,
used by the <a class="reference internal" href="editing.html#administrator-editing"><span class="std std-ref">Editing</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Exclude</span> <span class="pre">properties</span></code>: the list of attributes (database columns) that should not appear in
the <a class="reference internal" href="editing.html#administrator-editing"><span class="std std-ref">Editing</span></a> so that they cannot be modified by the end user.
For enumerable attributes (foreign key), the column name should end with ‘_id’.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Interfaces</span></code>: visible in the checked interfaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Restriction</span> <span class="pre">areas</span></code>: the areas through which the user can see the layer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span></code>: Additional metadata.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Dimensions</span></code>: the dimensions, if not provided default values are used.</p></li>
</ul>
</div>
<div class="section" id="wms-layer">
<h3>WMS layer<a class="headerlink" href="#wms-layer" title="Permalink to this headline">¶</a></h3>
<p>On internal WMS layers we have the following specific attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OGC</span> <span class="pre">Server</span></code>: the used server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WMS</span> <span class="pre">layer</span> <span class="pre">name</span></code>: the WMS layers. Can be one layer, one group, a comma separated list of layers.
In the case of a comma separated list of layers, we will get the legend rule for the
layer icon on the first layer, and the legend will not be supported we should define a legend metadata.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Style</span></code>: the style used, can be empty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span> <span class="pre">mode</span></code>: used for the WMS time component.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span> <span class="pre">widget</span></code>: the component type used for the WMS time.</p></li>
</ul>
</div>
<div class="section" id="wmts-layer">
<h3>WMTS layer<a class="headerlink" href="#wmts-layer" title="Permalink to this headline">¶</a></h3>
<p>On WMTS layers we have the following specific attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GetCapabilities</span> <span class="pre">URL</span></code>: the URL to the WMTS capabilities.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WMTS</span> <span class="pre">layer</span> <span class="pre">name</span></code>: the WMTS layer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Style</span></code>: the used style, if not present we use the default style.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Matrix</span> <span class="pre">set</span></code>: the used matrix set, if there is only one matrix set in the capabilities it can be empty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Image</span> <span class="pre">type</span></code>: the MIME type of the images (e.g.: <code class="docutils literal notranslate"><span class="pre">image/png</span></code>).</p></li>
</ul>
<p>When using self generated WMTS tiles, you should use the following url: <code class="docutils literal notranslate"><span class="pre">config://local/tiles/1.0.0/WMTSCapabilities.xml</span></code>.
* <code class="docutils literal notranslate"><span class="pre">config://local</span></code> is a dynamic path based on the project configuration.
* <code class="docutils literal notranslate"><span class="pre">/tiles</span></code> is a proxy in the tilecloudchain container.</p>
</div>
<div class="section" id="queryable-wmts">
<h3>Queryable WMTS<a class="headerlink" href="#queryable-wmts" title="Permalink to this headline">¶</a></h3>
<p>To make the WMTS queryable, you should add the following <code class="docutils literal notranslate"><span class="pre">Metadata</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ogcServer</span></code> with the name of the used <code class="docutils literal notranslate"><span class="pre">OGC</span> <span class="pre">server</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wmsLayers</span></code> or <code class="docutils literal notranslate"><span class="pre">queryLayers</span></code> with the layers to query (groups not supported).</p></li>
</ul>
<p>It is possible to give some scale limits for the queryable layers by setting
a <code class="docutils literal notranslate"><span class="pre">minResolution</span></code> and/or a <code class="docutils literal notranslate"><span class="pre">maxResolution</span> <span class="pre">Metadata</span></code> value(s) for the
WMTS layer. These values correspond to the WMTS layer resolution(s) which should
be the zoom limit.</p>
</div>
<div class="section" id="print-wmts-in-high-quality">
<h3>Print WMTS in high quality<a class="headerlink" href="#print-wmts-in-high-quality" title="Permalink to this headline">¶</a></h3>
<p>To print the layers in high quality, you can define that the image shall be retrieved with a
<code class="docutils literal notranslate"><span class="pre">GetMap</span></code> on the original WMS server.
To activate this, you should add the following <code class="docutils literal notranslate"><span class="pre">Metadata</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ogcServer</span></code> with the name of the used <code class="docutils literal notranslate"><span class="pre">OGC</span> <span class="pre">server</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wmsLayers</span></code> or <code class="docutils literal notranslate"><span class="pre">printLayers</span></code> with the layers to print.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See also: <a class="reference internal" href="#administrator-administrate-metadata"><span class="std std-ref">Metadata</span></a>, <a class="reference internal" href="#administrator-administrate-ogc-server"><span class="std std-ref">OGC Server</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="layergroup">
<h2>LayerGroup<a class="headerlink" href="#layergroup" title="Permalink to this headline">¶</a></h2>
<p>Attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: It is used through the i18n tools to display the name on the layers tree.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span> <span class="pre">URL</span></code>: (deprecated).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Expanded</span></code>: (deprecated).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Children</span></code>: the ordered children elements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span></code>: Additional metadata.</p></li>
</ul>
</div>
<div class="section" id="background-layers">
<h2>Background layers<a class="headerlink" href="#background-layers" title="Permalink to this headline">¶</a></h2>
<p>The background layers are configured in the database, with the layer group named
<strong>background</strong> (by default).</p>
</div>
<div class="section" id="theme">
<h2>Theme<a class="headerlink" href="#theme" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: It is used through the i18n tools to display the name on the layers tree.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span> <span class="pre">URL</span></code>: (deprecated).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Public</span></code>: makes the layer public. You must use the <code class="docutils literal notranslate"><span class="pre">Restriction</span> <span class="pre">Roles</span></code> to make
private theme accessible.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Icon</span></code>: the icon URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Interfaces</span></code>: visible in the checked interfaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Restricted</span> <span class="pre">Roles</span></code>: Restricted to the following roles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Functionalities</span></code>: The linked functionalities.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Children</span></code>: the ordered children elements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span></code>: Additional metadata.</p></li>
</ul>
</div>
<div class="section" id="restricted-area">
<h2>Restricted area<a class="headerlink" href="#restricted-area" title="Permalink to this headline">¶</a></h2>
<p>A restricted area is an area for which a user must possess a specific role in order to be able
to see (and edit, if applicable) the features within this area.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: a name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: a description.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Roles</span></code>: Restricted to the following roles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Read/write</span></code>: Allows the linked users to change the objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Area</span></code>: Active in the following area, if not defined it is active everywhere.</p></li>
</ul>
</div>
<div class="section" id="users">
<h2>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h2>
<p>Each user may have from 1 to n roles, but each user has a default role from
which are taken some settings. Currently the default role (defined through the
“Settings from role” selection) has an influence on the role extent and on some
functionalities regarding their configuration.</p>
<p>Role extents for users can only be set in one role, because the application
is currently not able to check multiple extents for one user, thus it is the
default role which defines this unique extent.</p>
<p>Any functionality specified as <code class="docutils literal notranslate"><span class="pre">single</span></code> can be defined only once per user.
Hence, these functionalities have to be defined in the default role.</p>
<p>By default, functionalities are not specified as <code class="docutils literal notranslate"><span class="pre">single</span></code>. Currently, the
following functionalities are of <code class="docutils literal notranslate"><span class="pre">single</span></code> type:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default_basemap</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_theme</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">preset_layer_filter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">open_panel</span></code></p></li>
</ul>
<p>Any other functionality (with <code class="docutils literal notranslate"><span class="pre">single</span></code> not set or set to <code class="docutils literal notranslate"><span class="pre">false</span></code>) can
be defined in any role linked to the user.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/camptocamp.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">c2cgeoportal</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=camptocamp&repo=c2cgeoportal&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrator/index.html">Integrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Administrator Guide</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Administrator Guide</a></li>
      <li>Next: <a href="editing.html" title="next chapter">Editing</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-2019, Camptocamp.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/administrator/administrate.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/camptocamp/c2cgeoportal" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>