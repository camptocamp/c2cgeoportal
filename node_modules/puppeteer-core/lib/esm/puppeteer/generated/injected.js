/**
 * JavaScript code that provides the puppeteer utilities. See the
 * [README](https://github.com/puppeteer/puppeteer/blob/main/src/injected/README.md)
 * for injection for more information.
 *
 * @internal
 */
export const source = "\"use strict\";var E=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var oe=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var r in e)E(t,r,{get:e[r],enumerable:!0})},se=(t,e,r,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of ne(e))!oe.call(t,o)&&o!==r&&E(t,o,{get:()=>e[o],enumerable:!(n=re(e,o))||n.enumerable});return t};var ie=t=>se(E({},\"__esModule\",{value:!0}),t);var Ne={};u(Ne,{default:()=>Ee});module.exports=ie(Ne);var T=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},y=class extends T{},N=class extends T{#e;#t=\"\";set code(e){this.#e=e}get code(){return this.#e}set originalMessage(e){this.#t=e}get originalMessage(){return this.#t}},ke=Object.freeze({TimeoutError:y,ProtocolError:N});function f(t){let e=!1,r=!1,n,o,i=new Promise((a,l)=>{n=a,o=l}),s=t&&t.timeout>0?setTimeout(()=>{r=!0,o(new y(t.message))},t.timeout):void 0;return Object.assign(i,{resolved:()=>e,finished:()=>e||r,resolve:a=>{s&&clearTimeout(s),e=!0,n(a)},reject:a=>{clearTimeout(s),r=!0,o(a)}})}var z=new Map,X=t=>{let e=z.get(t);return e||(e=new Function(`return ${t}`)(),z.set(t,e),e)};var k={};u(k,{ariaQuerySelector:()=>ae,ariaQuerySelectorAll:()=>v});var ae=(t,e)=>window.__ariaQuerySelector(t,e),v=async function*(t,e){yield*await window.__ariaQuerySelectorAll(t,e)};var I={};u(I,{customQuerySelectors:()=>A});var C=class{#e=new Map;register(e,r){if(!r.queryOne&&r.queryAll){let n=r.queryAll;r.queryOne=(o,i)=>{for(let s of n(o,i))return s;return null}}else if(r.queryOne&&!r.queryAll){let n=r.queryOne;r.queryAll=(o,i)=>{let s=n(o,i);return s?[s]:[]}}else if(!r.queryOne||!r.queryAll)throw new Error(\"At least one query method must be defined.\");this.#e.set(e,{querySelector:r.queryOne,querySelectorAll:r.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},A=new C;var q={};u(q,{pierceQuerySelector:()=>le,pierceQuerySelectorAll:()=>ce});var le=(t,e)=>{let r=null,n=o=>{let i=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&n(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==o&&!r&&s.matches(e)&&(r=s)}while(!r&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),n(t),r},ce=(t,e)=>{let r=[],n=o=>{let i=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&n(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==o&&s.matches(e)&&r.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),n(t),r};var c=(t,e)=>{if(!t)throw new Error(e)};var b=class{#e;#t;#n;#r;constructor(e,r){this.#e=e,this.#t=r}async start(){let e=this.#r=f(),r=await this.#e();if(r){e.resolve(r);return}this.#n=new MutationObserver(async()=>{let n=await this.#e();n&&(e.resolve(n),await this.stop())}),this.#n.observe(this.#t,{childList:!0,subtree:!0,attributes:!0})}async stop(){c(this.#r,\"Polling never started.\"),this.#r.finished()||this.#r.reject(new Error(\"Polling stopped\")),this.#n&&(this.#n.disconnect(),this.#n=void 0)}result(){return c(this.#r,\"Polling never started.\"),this.#r}},P=class{#e;#t;constructor(e){this.#e=e}async start(){let e=this.#t=f(),r=await this.#e();if(r){e.resolve(r);return}let n=async()=>{if(e.finished())return;let o=await this.#e();if(!o){window.requestAnimationFrame(n);return}e.resolve(o),await this.stop()};window.requestAnimationFrame(n)}async stop(){c(this.#t,\"Polling never started.\"),this.#t.finished()||this.#t.reject(new Error(\"Polling stopped\"))}result(){return c(this.#t,\"Polling never started.\"),this.#t}},x=class{#e;#t;#n;#r;constructor(e,r){this.#e=e,this.#t=r}async start(){let e=this.#r=f(),r=await this.#e();if(r){e.resolve(r);return}this.#n=setInterval(async()=>{let n=await this.#e();n&&(e.resolve(n),await this.stop())},this.#t)}async stop(){c(this.#r,\"Polling never started.\"),this.#r.finished()||this.#r.reject(new Error(\"Polling stopped\")),this.#n&&(clearInterval(this.#n),this.#n=void 0)}result(){return c(this.#r,\"Polling never started.\"),this.#r}};var j={};u(j,{pQuerySelector:()=>Pe,pQuerySelectorAll:()=>te});var m=class{static async*map(e,r){for await(let n of e)yield await r(n)}static async*flatMap(e,r){for await(let n of e)yield*r(n)}static async collect(e){let r=[];for await(let n of e)r.push(n);return r}static async first(e){for await(let r of e)return r}};function Y(t){return typeof t==\"object\"&&t!==null&&\"name\"in t&&\"message\"in t}var R={[\"attribute\"]:/\\[\\s*(?:(?<namespace>(?:\\\\.|[-\\w\\P{ASCII}])+|\\*)?\\|)?(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)\\s*(?:(?<operator>\\W?=)\\s*(?<value>.+?)\\s*(\\s(?<caseSensitive>[iIsS]))?\\s*)?\\]/gu,[\"id\"]:/#(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)/gu,[\"class\"]:/\\.(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)/gu,[\"comma\"]:/\\s*,\\s*/g,[\"combinator\"]:/\\s*(?:>{3,4}|[\\s>+~])\\s*/g,[\"pseudo-element\"]:/::(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)(?:\\((?<argument>¶+)\\))?/gu,[\"pseudo-class\"]:/:(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)(?:\\((?<argument>¶+)\\))?/gu,[\"universal\"]:/(?:(?<namespace>\\*|(?:\\\\.|[-\\w\\P{ASCII}])*)\\|)?\\*/gu,[\"type\"]:/(?:(?<namespace>\\*|(?:\\\\.|[-\\w\\P{ASCII}])*)\\|)?(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)/gu},ue=t=>{switch(t){case\"pseudo-element\":case\"pseudo-class\":return new RegExp(R[t].source.replace(\"(?<argument>\\xB6+)\",\"(?<argument>.+)\"),\"gu\");default:return R[t]}};function me(t){let e=0;for(let r of t)switch(typeof r){case\"string\":throw new Error(`Unexpected sequence ${r} found at index ${e}`);case\"object\":switch(e+=r.content.length,r.pos=[e-r.content.length,e],r.type){case\"combinator\":case\"comma\":r.content=r.content.trim()||\" \";break}break}}function G(t,e=R){if(!t)return[];t=t.trim();let r=[];{let o={escaped:!1,offset:0};for(let i=0;i<t.length;++i)if(!o.escaped)switch(t[i]){case\"\\\\\":o.escaped=!0;break;case'\"':case\"'\":{if(!o.quoted){o.quoted=t[i],o.offset=i;continue}let s=o.quoted;if(s!==t[i])continue;delete o.quoted;let a=o.offset,l=t.slice(o.offset,i+1);r.push({value:l,offset:a});let d=`${s}${\"\\xA7\".repeat(l.length-2)}${s}`;t=t.slice(0,a)+d+t.slice(a+l.length);break}}}{let o={escaped:!1,nesting:0,offset:0};for(let i=0;i<t.length;++i)if(!o.escaped)switch(t[i]){case\"\\\\\":o.escaped=!0;break;case\"(\":if(++o.nesting!==1)continue;o.offset=i;break;case\")\":{if(--o.nesting!==0)continue;let{offset:s}=o,a=t.slice(s,i+1);r.push({value:a,offset:s});let l=`(${\"\\xB6\".repeat(a.length-2)})`;t=t.slice(0,s)+l+t.slice(s+a.length);break}}}let n=[t];for(let[o,i]of Object.entries(e))for(let s=0;s<n.length;s++){let a=n[s];if(typeof a!=\"string\")continue;i.lastIndex=0;let l=i.exec(a);if(!l)continue;let d=l.index-1,S=[],H=l[0],V=a.slice(0,d+1);V&&S.push(V),S.push({...l.groups,type:o,content:H});let B=a.slice(d+H.length+1);B&&S.push(B),n.splice(s,1,...S)}me(n);for(let o of r.reverse())for(let i of n){let{offset:s,value:a}=o;if(!(i.pos[0]<=s&&s+a.length<=i.pos[1]))continue;let{content:l}=i,d=s-i.pos[0];i.content=l.slice(0,d)+a+l.slice(d+a.length),i.__changed=i.content!==l}for(let o of n){if(!o.__changed)continue;delete o.__changed;let i=ue(o.type);c(i),i.lastIndex=0;let s=i.exec(o.content);c(s),Object.assign(o,s.groups)}return n}var D=class{#e=[];#t;constructor(e){this.#t=e}get length(){return this.#e.length}add(e){this.#e.push(e)}toStringAndClear(){let e=this.#e[0],r=this.#e[this.#e.length-1];return this.#e.splice(0),this.#t.slice(e.pos[0],r.pos[1])}},de=/\\\\[\\s\\S]/g,fe=t=>{if(t.length>1){for(let e of['\"',\"'\"])if(!(!t.startsWith(e)||!t.endsWith(e)))return t.slice(e.length,-e.length).replace(de,r=>r.slice(1))}return t};function J(t){let e=!0,r=G(t);if(r.length===0)return[[],e];let n=[],o=[n],i=[o],s=new D(t);for(let a of r){switch(a.type){case\"combinator\":switch(a.content){case\">>>\":e=!1,s.length&&n.push(s.toStringAndClear()),n=[],o.push(\">>>\"),o.push(n);continue;case\">>>>\":e=!1,s.length&&n.push(s.toStringAndClear()),n=[],o.push(\">>>>\"),o.push(n);continue}break;case\"pseudo-element\":if(!a.name.startsWith(\"-p-\"))break;e=!1,s.length&&n.push(s.toStringAndClear()),n.push({name:a.name.slice(3),value:fe(a.argument??\"\")});continue;case\"comma\":s.length&&n.push(s.toStringAndClear()),n=[],o=[n],i.push(o);continue}s.add(a)}return s.length&&n.push(s.toStringAndClear()),[i,e]}var O={};u(O,{textQuerySelectorAll:()=>w});var pe=new Set([\"checkbox\",\"image\",\"radio\"]),he=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!pe.has(t.type),ge=new Set([\"SCRIPT\",\"STYLE\"]),h=t=>!ge.has(t.nodeName)&&!document.head?.contains(t),_=new WeakMap,Z=t=>{for(;t;)_.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},K=new WeakSet,ye=new MutationObserver(t=>{for(let e of t)Z(e.target)}),p=t=>{let e=_.get(t);if(e||(e={full:\"\",immediate:[]},!h(t)))return e;let r=\"\";if(he(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener(\"input\",n=>{Z(n.target)},{once:!0,capture:!0});else{for(let n=t.firstChild;n;n=n.nextSibling){if(n.nodeType===Node.TEXT_NODE){e.full+=n.nodeValue??\"\",r+=n.nodeValue??\"\";continue}r&&e.immediate.push(r),r=\"\",n.nodeType===Node.ELEMENT_NODE&&(e.full+=p(n).full)}r&&e.immediate.push(r),t instanceof Element&&t.shadowRoot&&(e.full+=p(t.shadowRoot).full),K.has(t)||(ye.observe(t,{childList:!0,characterData:!0}),K.add(t))}return _.set(t,e),e};var w=function*(t,e){let r=!1;for(let n of t.childNodes)if(n instanceof Element&&h(n)){let o;n.shadowRoot?o=w(n.shadowRoot,e):o=w(n,e);for(let i of o)yield i,r=!0}r||t instanceof Element&&h(t)&&p(t).full.includes(e)&&(yield t)};var Q={};u(Q,{checkVisibility:()=>Se,deepChildren:()=>L,deepDescendents:()=>M});var we=[\"hidden\",\"collapse\"],Se=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let r=t.nodeType===Node.TEXT_NODE?t.parentElement:t,n=window.getComputedStyle(r),o=n&&!we.includes(n.visibility)&&!Te(r);return e===o?t:!1};function Te(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}function*L(t){let e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=e.nextNode();for(;r;r=e.nextNode())yield r.shadowRoot??r}function*M(t){let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)],r;for(;r=e.shift();)for(let n=r.nextNode();n;n=r.nextNode()){if(!n.shadowRoot){yield n;continue}e.push(document.createTreeWalker(n.shadowRoot,NodeFilter.SHOW_ELEMENT)),yield n.shadowRoot}}var F={};u(F,{xpathQuerySelectorAll:()=>$});var $=function*(t,e){let n=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),o;for(;o=n.iterateNext();)yield o};var g=class extends Error{constructor(e,r){super(`${e} is not a valid selector: ${r}`)}},W=class{#e;#t;#n=[];#r=void 0;elements;constructor(e,r,n){this.elements=[e],this.#e=r,this.#t=n,this.#o()}async run(){if(typeof this.#r==\"string\")switch(this.#r.trimStart()){case\":scope\":this.#o();break;default:this.#r=` ${this.#r}`;break}for(;this.#r!==void 0;this.#o()){let e=this.#r,r=this.#e;typeof e==\"string\"?this.elements=m.flatMap(this.elements,async function*(n){if(!n.parentElement){yield*n.querySelectorAll(e);return}let o=0;for(let i of n.parentElement.children)if(++o,i===n)break;yield*n.parentElement.querySelectorAll(`:scope > :nth-child(${o})${e}`)}):this.elements=m.flatMap(this.elements,async function*(n){switch(e.name){case\"text\":yield*w(n,e.value);break;case\"xpath\":yield*$(n,e.value);break;case\"aria\":yield*v(n,e.value);break;default:let o=A.get(e.name);if(!o)throw new g(r,`Unknown selector type: ${e.name}`);yield*o.querySelectorAll(n,e.value)}})}}#o(){if(this.#n.length!==0){this.#r=this.#n.shift();return}if(this.#t.length===0){this.#r=void 0;return}let e=this.#t.shift();switch(e){case\">>>>\":{this.elements=m.flatMap(this.elements,function*(r){yield*L(r)}),this.#o();break}case\">>>\":{this.elements=m.flatMap(this.elements,function*(r){yield*M(r)}),this.#o();break}default:this.#n=e,this.#o();break}}},U=class{#e=new Map;calculate(e,r=[]){if(e instanceof Document)return r;e instanceof ShadowRoot&&(e=e.host);let n=this.#e.get(e);if(n)return[...n,...r];let o=0;for(let s=e.previousSibling;s;s=s.previousSibling)++o;let i=this.calculate(e.parentNode,[o]);return this.#e.set(e,i),[...i,...r]}},ee=(t,e)=>{if(t.length+e.length===0)return 0;let[r=1/0,...n]=t,[o=1/0,...i]=e;return r===o?ee(n,i):r<o?1:-1},be=async function*(t){let e=new Set;for await(let n of t)e.add(n);let r=new U;yield*[...e.values()].map(n=>[n,r.calculate(n)]).sort(([,n],[,o])=>ee(n,o)).map(([n])=>n)},te=function(t,e){let r,n;try{[r,n]=J(e)}catch(o){throw Y(o)?new g(e,o.message):new g(e,String(o))}if(n)return t.querySelectorAll(e);if(r.some(o=>{let i=0;return o.some(s=>(typeof s==\"string\"?++i:i=0,i>1))}))throw new g(e,\"Multiple deep combinators found in sequence.\");return be(m.flatMap(r,o=>{let i=new W(t,e,o);return i.run(),i.elements}))},Pe=async function(t,e){for await(let r of te(t,e))return r;return null};var xe=Object.freeze({...k,...I,...q,...j,...O,...Q,...F,createDeferredPromise:f,createFunction:X,createTextContent:p,IntervalPoller:x,isSuitableNodeForTextMatching:h,MutationPoller:b,RAFPoller:P}),Ee=xe;\n";
//# sourceMappingURL=injected.js.map